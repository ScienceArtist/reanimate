(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{18:function(e,t,n){e.exports=n(36)},23:function(e,t,n){},24:function(e,t,n){},36:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),o=n(11),r=n.n(o),s=(n(23),n(2)),m=n(12),l=n(13),c=n(16),d=n(14),h=n(1),u=n(17),g=(n(24),n(15)),w=n.n(g),p=(n(33),n(34),n(35),[{name:"Examples",programs:[{name:"LaTeX Draw",code:'animation = pauseAtEnd 1 $ proc () -> do\n    emit -< toHtml $ mkBackground "black"\n    drawText msg `andThen` fillText msg -< ()\n  where\n    msg = "\\\\sum_{k=1}^\\\\infty {1 \\\\over k^2} = {\\\\pi^2 \\\\over 6}"\n    placement = translate (320/2) (180/2) . scale 5\n    fillText txt = proc () -> do\n      duration 1 -< ()\n      s <- signal 0 1 -< ()\n      emit -< toHtml $ placement $\n        withFillColor "white" $ withFillOpacity s $\n          center $ latexAlign txt\n    drawText txt = proc () -> do\n      duration 2 -< ()\n      s <- signal 0 1 -< ()\n      emit -< toHtml $ placement $\n        withStrokeColor "white" $ withFillOpacity 0 $ withStrokeWidth (Num 0.1) $\n          partialSvg s $ center $ latexAlign txt'},{name:"LaTeX Color",code:'animation :: Ani ()\nanimation = proc () -> do\n    duration 0.1 -< ()\n    emit -< toHtml $ mkBackground "black"\n    emit -< toHtml $ translate (320/2) (180/2) $ withStrokeWidth (Num 0.2) $\n      withStrokeColor "white" $\n      withSubglyphs [0] (withFillColor "blue") $\n      withSubglyphs [1] (withFillColor "yellow") $\n      withSubglyphs [2] (withFillColor "green") $\n      withSubglyphs [3] (withFillColor "red") $\n      withSubglyphs [4] (withFillColor "darkslategrey") $\n      svg\n  where\n    svg = scale 10 $ center $ latex "\\\\LaTeX"'},{name:"LaTeX Basic",code:'animation :: Ani ()\nanimation = proc () -> do\n  duration 2 -< ()\n  s <- signalOscillate 0 1 -< ()\n  emit -< toHtml $ mkGroup\n    [ mkBackground "black"\n    , translate (320/2) (180/2) $ mkGroup\n      [ withStrokeColor "white" $ withFillOpacity 0 $ withStrokeWidth (Num 0.1) text\n      , withFillColor "white" $ withFillOpacity s text] ]\n  where\n    text = scale 4 $ center $ latexAlign\n      "\\\\sum_{k=1}^\\\\infty {1 \\\\over k^2} = {\\\\pi^2 \\\\over 6}"'},{name:"Bounding boxes",code:'animation :: Ani ()\nanimation = proc () -> do\n  emit -< toHtml $ mkBackground "black"\n  duration 5 -< ()\n  annotate\' bbox1 -< g_ [transform_ $ Lucid.translate (320/2-50) (180/2)]\n  annotate\' bbox2 -< g_ [transform_ $ Lucid.translate (320/2+50) (180/2)]\n\nbbox1 :: Ani ()\nbbox1 = proc () -> do\n  s <- signal 0 1 -< ()\n  emit -< do\n    toHtml $ mkBoundingBox $ rotate (360*s) svg\n    toHtml $ withFillColor "white" $ rotate (360*s) svg\n  where\n    svg = scale 3 $ center $ latexAlign "\\\\sum_{k=1}^\\\\infty"\n\nbbox2 :: Ani ()\nbbox2 = proc () -> do\n  s <- signalOscillate 0 1 -< ()\n  emit -< do\n    toHtml $ mkBoundingBox $ partialSvg s heartShape\n    toHtml $ withStrokeColor "white" $ withFillOpacity 0 $ partialSvg s heartShape\n\nmkBoundingBox :: Tree -> Tree\nmkBoundingBox svg = withStrokeColor "red" $ withFillOpacity 0 $\n    mkRect (S.Num x, S.Num y) (S.Num w) (S.Num h)\n  where\n    (x, y, w, h) = boundingBox svg\n\nheartShape =\n    center $ rotateAroundCenter 225 $ mkPathString\n      "M0.0,40.0 v-40.0 h40.0      a20.0 20.0 90.0 0 1 0.0,40.0      a20.0 20.0 90.0 0 1 -40.0,0.0 Z"'},{name:"Sinewave",code:'animation :: Ani ()\nanimation = proc () -> do\n    duration 10 -< ()\n    emit -< toHtml $ mkBackground "black"\n    idx <- signalOscillate 0 1 -< ()\n    emit -< do\n      defs_ $ clipPath_ [id_ "clip"] $ toHtml $\n        mkRect (Num 0, Num (-height)) (Num $ idx*width) (Num 320)\n      toHtml $ translate margin height $ withStrokeColor "white" $\n        withClipPathRef (Ref "clip") $ mkPathText $ renderPathText $ approxFnData 100 wave\n      toHtml $ withStrokeColor "white" $\n        mkLine (Num margin, Num 10) (Num margin, Num 170)\n      toHtml $ withStrokeColor "white" $\n        mkLine (Num margin, Num height) (Num (margin+width), Num height)\n    let (circX, circY) = wave idx\n    emit -< g_ [transform_ $ Lucid.translate margin height] $\n      circle_ [num_ cx_ circX, num_ cy_ circY, r_ "3", fill_ "red"]\n  where\n    freq = 3; margin = 30; width = 260; height = 90\n    wave idx = (idx*width, sin (idx*pi*2*freq) * 50)'},{name:"Morphwave",code:'animation :: Ani ()\nanimation = proc () -> do\n    duration 5 -< ()\n    morph <- signalOscillate 0 1 -< ()\n    emit -< toHtml $ mkBackground "black"\n    emit -< toHtml $ withStrokeColor "white" $ mkGroup\n      [ translate 30 50  $ mkPathText $ renderPathText wave1\n      , translate 30 130 $ mkPathText $ renderPathText wave2\n      , translate 30 90  $ mkPathText $ renderPathText $ morphPath wave1 wave2 morph\n      , mkLine (Num 30, Num 10) (Num 30, Num 170)\n      , mkLine (Num 30, Num 90) (Num 290, Num 90) ]\n  where\n    freq = 3; width = 260\n    wave1 = approxFnData 100 $ \\idx -> (idx*width, sin (idx*pi*2*freq) * 20)\n    wave2 = approxFnData 100 $ \\idx -> (idx*width, sin (idx*pi*2*(freq*3)) * 20)'},{name:"Morphwave Circle",code:'animation :: Ani ()\nanimation = proc t -> do\n    duration 5 -< ()\n    idx <- signalOscillate 0 1 -< ()\n    emit -< toHtml $ mkBackground "black"\n    emit -< toHtml $ withStrokeColor "white" $ mkGroup\n      [ translate 30 90 $ mkPathText $ renderPathText $ morphPath circle wave1 idx\n      , mkLine (Num 30, Num 10) (Num 30, Num 170)\n      , mkLine (Num 30, Num 90) (Num 290, Num 90) ]\n  where\n    freq = 5; width = 260; radius = 50\n    wave1 = approxFnData 100 $ \\idx -> (idx*width, sin (idx*pi*2*freq) * 20)\n    circle = approxFnData 100 $ \\idx ->\n      (cos (idx*pi*2+pi/2)*radius + width/2, sin (idx*pi*2+pi/2)*radius)'},{name:"Progress meters",code:'animation :: Ani ()\nanimation = proc () -> do\n  emit -< rect_ [width_ "100%", height_ "100%", fill_ "black"]\n  annotate\' (adjustSpeed 1.0 progressMeter) -< g_ [transform_ $ Lucid.translate 40 20]\n  annotate\' (adjustSpeed 2.0 progressMeter) -< g_ [transform_ $ Lucid.translate 140 20]\n  annotate\' (adjustSpeed 0.5 progressMeter) -< g_ [transform_ $ Lucid.translate 240 20]\n\n  emit -< do\n    text_ [x_ "55", y_ "150", font_size_ "20"\n          , text_anchor_ "middle"\n          , fill_ "white"] "1x"\n    text_ [x_ "155", y_ "150", font_size_ "20"\n          , text_anchor_ "middle"\n          , fill_ "white"] "2x"\n    text_ [x_ "255", y_ "150", font_size_ "20"\n          , text_anchor_ "middle"\n          , fill_ "white"] "0.5x"\n\nprogressMeter :: Ani ()\nprogressMeter = loop $ proc () -> do\n  duration 5 -< ()\n  h <- signal 0 100 -< ()\n  emit -< rect_ [ width_ "30", height_ "100", stroke_ "white", stroke_width_ "2", fill_opacity_ "0" ]\n  emit -< rect_ [ width_ "30", num_ height_ h, stroke_ "white", fill_ "white" ]\n  returnA -< ()'}]}]),$=function(e){function t(e){var n;Object(m.a)(this,t),(n=Object(c.a)(this,Object(d.a)(t).call(this,e))).connect=function(){var e=new WebSocket("wss://reanimate.clozecards.com:9160");e.onopen=function(t){n.setState(function(e){return Object(s.a)({},e,{message:"Connected."})}),e.send(n.state.program)},e.onclose=function(e){n.setState(function(e){return Object(s.a)({},e,{message:"Disconnected."})}),setTimeout(n.connect,1e3)},e.onmessage=function(e){if("Success!"===e.data)console.log("Success");else if("Rendering"===e.data)n.setState({message:"Rendering..."}),n.nFrames_new=0,n.svgs_new=[];else if("Done"===e.data)n.setState({message:"Success!"}),console.log("Done"),n.nFrames=n.nFrames_new,n.svgs=n.svgs_new,n.nFrames_new=0,n.svgs_new=[],n.start=Date.now();else if(e.data.startsWith("Error"))console.log("Error"),n.setState({message:e.data.substring(5)});else{n.setState({message:"Rendering: ".concat(n.nFrames_new)}),n.nFrames_new++;var t=document.createElement("div");t.innerHTML=e.data,n.svgs_new.push(t)}},n.setState(function(t){return Object(s.a)({},t,{socket:e,message:"Connecting..."})})},n.onLoad=function(e){setTimeout(function(){e.resize()},0)},n.onChange=function(e){n.setState({program:e}),n.timeout&&clearTimeout(n.timeout);var t=n.state.socket,a=Object(h.a)(n);n.timeout=setTimeout(function(){console.log("change",e),a.setState(function(e){return Object(s.a)({},e,{message:"Compiling..."})}),t.send(e)},500)},n.selectPreset=function(e){n.onChange(e.target.value)},n.state={program:p[0].programs[0].code},setTimeout(n.connect,0),n.nFrames_new=0,n.svgs_new=[],n.nFrames=0,n.svgs=[],n.start=Date.now();var a=Object(h.a)(n);return requestAnimationFrame(function e(){var t=Date.now(),i=a.nFrames,o=Math.round((t-n.start)/1e3*60)%i;if(i){for(;a.svg.firstChild;)a.svg.removeChild(a.svg.firstChild);a.svg.appendChild(a.svgs[o])}else a.svg.innerText="Loading...";requestAnimationFrame(e)}),n}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.state,n=t.message,a=t.program;return i.a.createElement("div",{className:"App"},i.a.createElement("div",null,i.a.createElement("select",{onChange:this.selectPreset},p.map(function(e,t){return i.a.createElement("optgroup",{key:t,label:e.name},e.programs.map(function(e,t){return i.a.createElement("option",{value:e.code,key:t},e.name)}))}))),i.a.createElement("div",{className:"editor"},i.a.createElement(w.a,{mode:"haskell",width:"100%",height:"100%",theme:"monokai",fontSize:16,name:"UNIQUE_ID_OF_DIV",value:a,onLoad:this.onLoad,onChange:this.onChange,focus:!0,editorProps:{$blockScrolling:!0}})),i.a.createElement("div",{className:"controls"}),i.a.createElement("div",{className:"viewer"},i.a.createElement("div",{ref:function(t){return e.svg=t}}),i.a.createElement("div",{className:"messages"},i.a.createElement("pre",null,n))))}}]),t}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(i.a.createElement($,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[18,1,2]]]);
//# sourceMappingURL=main.43a604af.chunk.js.map